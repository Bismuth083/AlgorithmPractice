# Digits(桁数)

## 概要

- 内容: 与えられた整数から桁数を算出するアルゴリズム
- 計算量: [$O(\log{N})$ ($N$: 桁数)]
- 前提知識: 10進数の仕組み

## 説明

桁数を算出するためのアルゴリズムは、よく知られているものでも複数ある。

2025年10月下旬に𝕏️で話題になったものやインターネットで出てくるものを見ると、以下のような方法が見つかった。

- 文字列型に変換して、Lengthを調べる。
- 0になるまで10で除算し続け、除算した回数を調べる。
- 比較元の数より大きくなるまで1を10倍し続けて、超えるまでに掛けた回数を調べる。
- ハードコードされたいくつかの999 ... 9と 大小比較する
- 最上位ビットの位置から桁数の候補を決定し、1回だけ比較する。

さらに、上のうちいくつかは、2分探索することで更に高速化できる。

C#の場合、最上位ビットを探すには`System.Numerics`の機能を使うか、自力で実装する必要があるのが難点。
今回は、Systemの範囲で実装可能なハードコード二分探索を採用した。

## 実装の方針

### 標準的な整数型(Int64, Uint64)

ハードコード二分探索する。Int64やUint64型の数値は高々20桁なので、
4 ~ 5 回比較するだけで終了する。

例: 1,234,567,890の場合

- まず、この数は10,000,000,000未満のため、1から10桁の数である
- 次に、この数は100,000以上のため、6から10桁の数である
- さらに、この数は100,000,000以上のため、9か10桁の数である
- 最後に、この数は1,000,000,000以上のため、10桁の数である。

このように、半分ずつ絞り込めばOK。

### 多倍長整数型(BigInteger)

気が向いたら調べて書く。

## 応用先

### AOJ 問題ID

- [Volume0-0002(Digit Number)](https://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=0002&lang=ja)

## リファレンス

- [正の桁数を求めるアルゴリズム](https://qiita.com/neko_the_shadow/items/ba00b4736647c3560d11)
- [Wandbox C++による実測ベンチマーク](https://wandbox.org/permlink/tdIcrXXiYiyB934u)
- [@ngtkana 氏のポスト](https://x.com/ngtkana/status/1980504937290428680)
- [@TumoiYorozu 氏のポスト](https://x.com/TumoiYorozu/status/1980464470750298183)
- [@yurina256 氏のポスト](https://x.com/yurina256/status/1980188561518498142)